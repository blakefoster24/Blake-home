generate_entities_readme:
  alias: Generate Entities README (Grouped)
  sequence:
    - action: notify.entities_md
      data:
        message: |-
          # Home Assistant â€” All Entities (Grouped)
          Auto-generated from running **Generate Entities README (Grouped)**.
          Add your human-friendly descriptions in **README.md** if you want a curated version.

          {% set sections = [
            ('light', 'ðŸ’¡ Lights'),
            ('switch', 'ðŸ”Œ Switches / Outlets'),
            ('sensor', 'ðŸŒ¡ Sensors'),
            ('binary_sensor', 'ðŸ§­ Binary Sensors'),
            ('scene', 'ðŸŽ› Scenes'),
            ('script', 'ðŸ“œ Scripts'),
            ('automation', 'ðŸ¤– Automations'),
            ('climate', 'ðŸŒ¬ Climate'),
            ('fan', 'ðŸŒ€ Fans'),
            ('cover', 'ðŸªŸ Covers'),
            ('media_player', 'ðŸ“º Media Players'),
            ('lock', 'ðŸ”’ Locks'),
            ('button', 'ðŸ”˜ Buttons'),
            ('input_boolean', 'ðŸŽš Input Booleans'),
            ('input_number', 'ðŸ”¢ Input Numbers'),
            ('input_select', 'ðŸ“‹ Input Selects'),
            ('device_tracker', 'ðŸ“ Device Trackers'),
            ('person', 'ðŸ‘¤ People')
          ] %}

          {% for domain, title in sections %}
          {% set items = attribute(states, domain) | list | sort(attribute='entity_id') %}
          {% if items | length > 0 %}
          ## {{ title }}
          | Entity ID | Friendly Name |
          |---|---|
          {% for s in items %}
          | `{{ s.entity_id }}` | {{ s.name }} |
          {% endfor %}

          {% endif %}
          {% endfor %}

          ---
          _Generated: {{ now().isoformat() }}_
  mode: single

