generate_entities_readme:
  alias: Generate Entities README (Grouped)
  sequence:
    - action: shell_command.write_entities_md
      data:
        content: |-
          # Home Assistant â€” All Entities (Grouped)
          Auto-generated from running **Generate Entities README (Grouped)**.
          Add human-friendly descriptions in **README.md** if you want a curated version.

          {% set sections = [
            ('light', 'ğŸ’¡ Lights'),
            ('switch', 'ğŸ”Œ Switches / Outlets'),
            ('sensor', 'ğŸŒ¡ Sensors'),
            ('binary_sensor', 'ğŸ§­ Binary Sensors'),
            ('scene', 'ğŸ› Scenes'),
            ('script', 'ğŸ“œ Scripts'),
            ('automation', 'ğŸ¤– Automations'),
            ('climate', 'ğŸŒ¬ Climate'),
            ('fan', 'ğŸŒ€ Fans'),
            ('cover', 'ğŸªŸ Covers'),
            ('media_player', 'ğŸ“º Media Players'),
            ('lock', 'ğŸ”’ Locks'),
            ('button', 'ğŸ”˜ Buttons'),
            ('input_boolean', 'ğŸš Input Booleans'),
            ('input_number', 'ğŸ”¢ Input Numbers'),
            ('input_select', 'ğŸ“‹ Input Selects'),
            ('device_tracker', 'ğŸ“ Device Trackers'),
            ('person', 'ğŸ‘¤ People')
          ] %}

          {% for domain, title in sections %}
          {% set items = states[domain] | list %}
          {% if items | count > 0 %}
          ## {{ title }}
          | Entity ID | Friendly Name |
          |---|---|
          {% for s in items | sort(attribute='entity_id') %}
          | `{{ s.entity_id }}` | {{ s.name }} |
          {% endfor %}

          {% endif %}
          {% endfor %}

          ---
          _Generated: {{ now().isoformat() }}_
  mode: single
  generate_helpers_readme:
  alias: Generate Helpers README (UI helpers snapshot)
  sequence:
    - action: shell_command.write_entities_md
      data:
        content: |-
          # Home Assistant â€” UI Helpers (Snapshot)
          Auto-generated list of helpers created via the UI. Safe to publish.

          {% set sections = [
            ('input_boolean', 'ğŸš Input Booleans'),
            ('input_number',  'ğŸ”¢ Input Numbers'),
            ('input_text',    'âœï¸ Input Texts'),
            ('input_select',  'ğŸ“‹ Input Selects'),
            ('input_datetime','ğŸ—“ Input Datetimes'),
            ('input_button',  'ğŸ”˜ Input Buttons'),
            ('timer',         'â± Timers'),
            ('counter',       'ğŸ” Counters')
          ] %}

          {% for domain, title in sections %}
          {% set items = states[domain] | list %}
          {% if items | count > 0 %}
          ## {{ title }}
          | Entity ID | Friendly Name | Key Attributes |
          |---|---|---|
          {% for s in items | sort(attribute='entity_id') %}
          {# Build a compact attributes summary per domain #}
          {% if domain == 'input_number' %}
          {% set attr = "min=" ~ (s.attributes.min|default('')) ~ ", max=" ~ (s.attributes.max|default('')) ~ ", step=" ~ (s.attributes.step|default('')) %}
          {% elif domain == 'input_text' %}
          {% set attr = "min=" ~ (s.attributes.min|default('')) ~ ", max=" ~ (s.attributes.max|default('')) ~ ", mode=" ~ (s.attributes.mode|default('')) %}
          {% elif domain == 'input_select' %}
          {% set attr = "options=" ~ (s.attributes.options|default([])|join(', ')) %}
          {% elif domain == 'input_datetime' %}
          {% set attr = "has_date=" ~ (s.attributes.has_date|default(false)) ~ ", has_time=" ~ (s.attributes.has_time|default(false)) %}
          {% elif domain == 'timer' %}
          {% set attr = "duration=" ~ (s.attributes.duration|default('')) ~ ", restore=" ~ (s.attributes.restore|default(false)) %}
          {% elif domain == 'counter' %}
          {% set attr = "min=" ~ (s.attributes.minimum|default('')) ~ ", max=" ~ (s.attributes.maximum|default('')) ~ ", step=" ~ (s.attributes.step|default('')) ~ ", restore=" ~ (s.attributes.restore|default(false)) %}
          {% else %}
          {% set attr = "" %}
          {% endif %}
          | `{{ s.entity_id }}` | {{ s.name }} | {{ attr }} |
          {% endfor %}

          {% endif %}
          {% endfor %}

          ---
          _Generated: {{ now().isoformat() }}_
  mode: single

  